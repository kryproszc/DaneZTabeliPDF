gminy_przypisane <- st_join(punkty_sf, polska, join = st_contains)

# Dodanie kolumny z ilością
gminy_przypisane$ilosc <- coordinates$ilosc[match(gminy_przypisane$geometry, punkty_sf$geometry)]

# Sprawdzenie wyników
print(gminy_przypisane)

# Rysowanie mapy Polski
map <- ggplot() +
  geom_sf(data = polska, fill = "lightgray", color = "black") +  
  geom_sf(data = gminy_przypisane, aes(fill = ilosc), color = "black", size = 0.5) +  
  scale_fill_gradient(low = "lightyellow", high = "red", name = "Liczba budynków") +  
  theme_minimal() +
  labs(title = "Zaznaczenie gmin na mapie Polski na podstawie współrzędnych",
       subtitle = "Kolor zależny od liczby budynków") +
  coord_sf()
