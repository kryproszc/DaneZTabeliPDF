    global ratio_df_p, binary_df_p
    
    linia_biznesowa = reactive.Value(0)
    
    @reactive.Effect
    @reactive.event(input.linie_biznesowe)
    def update_linia_biznesowa():
        linia_biznesowa.set(input.linie_biznesowe())
        print(f"Updated linia_biznesowa: {linia_biznesowa.get()}")
        update_global_variables()

    def update_global_variables():
        global ratio_df_p, binary_df_p
        ratio_df_p = calculate_ratios(df_paid_list[linia_biznesowa.get()])
        binary_df_p = create_binary_df(ratio_df_p)
